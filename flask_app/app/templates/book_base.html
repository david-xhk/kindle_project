{% extends "base.html" %}

{% macro recurse(node) -%}
<li>
{{ node["name"] }}
{% if (node["children"].values() | length) > 0 %}
<ul>
{% for child in node["children"].values() %}
    {{ recurse(child) }}
{% endfor %}
</ul>
{% endif %}
</li>
{%- endmacro %}

{% block content %}
<div class="navbar">
    <a href="{{ url_for('random_book') }}">Random Book</a>
    <a href="{{ url_for('random_review') }}">Random Review</a>
</div>
<div class="container">
    <h2>
        <a href="{{ url_for('get_book', asin=asin) }}">{{ title }}</a>
    </h2>
    <div id="book_content">
        <div>
            <img src="{{ imUrl }}" alt="{{ title }}" width=300 height=300/>
            <hr>
            <p><b>ASIN:</b> {{ asin }}</p>
            <p><b>Price:</b> {{ price }}</p>
            <p><b>Sales Rank:</b> {{ salesRank }}</p>
            <p>
                <b>Categories:</b>
                <ul>
                {% for node in categories["children"].values() %}
                    {{ recurse(node) }}
                {% endfor %}
                </ul>
            </p>
        </div>
        <div>
            {% block book_content %}{% endblock %}
        </div>
    </div>
</div>
{% endblock %}